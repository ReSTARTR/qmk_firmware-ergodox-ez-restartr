box: golang

build:
  steps:
    - script:
      name: go get
      cwd: $WERCKER_SOURCE_DIR
      code: |
        go install github.com/ReSTARTR/qmkmk
    - script:
      name: init tool
      code: |
        qmkmk init
    - script:
      name: install packages
      code: |
        apt-get update
        sudo apt-get install -y gcc unzip wget zip gcc-avr binutils-avr avr-libc dfu-programmer dfu-util gcc-arm-none-eabi binutils-arm-none-eabi libnewlib-arm-none-eabi
    - script:
      name: init tool
      code: |
        qmkmk -keyboard=ergodox -subproject=ez -keymap=default build
    - script:
      name: init tool
      code: |
        qmkmk -keyboard=ergodox -subproject=ez -keymap=restartr get
        qmkmk -keyboard=ergodox -subproject=ez -keymap=restartr build
